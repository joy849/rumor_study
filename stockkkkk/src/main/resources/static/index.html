<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>FinGuard</title>
    <link href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%23f2b84b'/%3E%3Ctext x='32' y='40' text-anchor='middle' font-size='36'%3E%3F%3C/text%3E%3C/svg%3E" rel="icon"/>
    <link href="assets/styles/global.css" rel="stylesheet">
    <link href="features/home/components/home-chat.css" rel="stylesheet">
</head>
<body>
<div class="app" id="app">
    <!-- Header -->
    <header class="app-header" role="banner">
        <div class="left cluster">
            <span class="brand">
                <span class="brand-icon">ğŸ›¡ï¸</span>
                <span>FinGuard í•€ê°€ë“œ</span>
            </span>
        </div>
        <div class="right cluster">
            <button class="ghost small" id="loginBtn">ë¡œê·¸ì¸</button>
            <button aria-expanded="false" aria-label="ë©”ë‰´ ì—´ê¸°" class="icon-btn" id="hamburger">
                <svg aria-hidden="true" height="22" viewbox="0 0 24 24" width="22"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-linecap="round" stroke-width="2"></path></svg>
            </button>
        </div>
    </header>

    <!-- Drawer (left, sliding) -->
    <aside aria-hidden="true" aria-modal="true" class="drawer" id="drawer">
        <div aria-label="ë‚´ë¹„ê²Œì´ì…˜" class="drawer-inner" role="dialog">
            <div class="drawer-head">
                <strong>ë©”ë‰´</strong>
                <button aria-label="ë©”ë‰´ ë‹«ê¸°" class="icon-btn" id="closeDrawer">
                    <svg height="22" viewbox="0 0 24 24" width="22"><path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-linecap="round" stroke-width="2"></path></svg>
                </button>
            </div>
            <nav class="drawer-nav">
                <a data-view="home" href="#home">í™ˆ</a>
                <a data-view="disclosure" href="#disclosure">ê³µì‹œ</a>
                <a class="active" data-view="rumor" href="#rumor">ë£¨ë¨¸ì²´í¬</a>
                <a data-view="profile" href="#profile">í”„ë¡œí•„</a>
            </nav>
        </div>
        <div class="overlay" id="drawerOverlay" tabindex="-1"></div>
    </aside>

    <!-- Views -->
    <main class="view-stack">
        <section aria-label="í™ˆ" class="view" data-view="home" id="view-home"></section>
        <section aria-label="ê³µì‹œ" class="view" data-view="disclosure" id="view-disclosure"></section>
        <section aria-label="ë£¨ë¨¸ ì²´í¬" class="view active" data-view="rumor" id="view-rumor" role="region"></section>
        <section aria-label="ë£¨ë¨¸ ìƒì„¸" class="view" data-view="detail" id="view-detail" role="region"></section>
        <section aria-label="í”„ë¡œí•„" class="view" data-view="profile" id="view-profile"></section>
    </main>

    <!-- Tabbar -->
    <footer aria-label="í•˜ë‹¨ íƒ­ë°”" class="tabbar" role="navigation">
        <a class="tab" data-view="home" href="#home">
            <div class="ico">ğŸ </div>
            <span>í™ˆ</span>
        </a>
        <a class="tab" data-view="disclosure" href="#disclosure">
            <div class="ico">ğŸ“°</div>
            <span>ê³µì‹œ</span>
        </a>
        <a class="tab active" data-view="rumor" href="#rumor">
            <div class="ico">ğŸ•µï¸</div>
            <span>ë£¨ë¨¸ì²´í¬</span>
        </a>
        <a class="tab" data-view="profile" href="#profile">
            <div class="ico">ğŸ‘¤</div>
            <span>í”„ë¡œí•„</span>
        </a>
    </footer>
</div>

<!-- Modals Container -->
<div id="modals-container"></div>

<!-- Scripts -->
<!-- 1. ì•Œë¦¼ ì‹œìŠ¤í…œ (alert ì¬ì •ì˜) -->
<script src="shared/components/modals/alert.js"></script>

<!-- 2. ê³µìœ  ì„œë¹„ìŠ¤ (ì „ì—­ ê°ì²´) -->
<script src="shared/services/api-client.js"></script>
<script src="shared/services/auth-manager.js"></script>
<script src="shared/services/modal-controller.js"></script>

<!-- 2. ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ (ë¼ìš°í„°, ë“œë¡œì–´) -->
<script src="assets/scripts/main.js"></script>

<!-- 3. Feature ìŠ¤í¬ë¦½íŠ¸ -->
<script src="features/home/home.js"></script>
<script src="features/disclosure/disclosure.js"></script>
<script src="features/rumor/rumor.js"></script>
<script src="features/detail/detail.js"></script>
<script src="features/profile/profile.js"></script>

<!-- Load Modals -->
<script>
    document.addEventListener('DOMContentLoaded', async function() {
        const modalsContainer = document.getElementById('modals-container');

        async function loadModal(url) {
            const response = await fetch(url);
            return await response.text();
        }

        try {
            const [submitModal, loginModal, detailModal] = await Promise.all([
                loadModal('shared/components/modals/SubmitModal.html'),
                loadModal('shared/components/modals/LoginModal.html'),
                loadModal('shared/components/modals/DetailModal.html')
            ]);

            modalsContainer.innerHTML = submitModal + loginModal + detailModal;
            console.log('âœ… ëª¨ë“  ëª¨ë‹¬ ë¡œë“œ ì™„ë£Œ');

            // ëª¨ë‹¬ ì»¨íŠ¸ë¡¤ëŸ¬ ì´ˆê¸°í™”
            if (window.initializeModals) {
                window.initializeModals();
            }
        } catch (error) {
            console.error('âŒ ëª¨ë‹¬ ë¡œë“œ ì‹¤íŒ¨:', error);
        }
    });
</script>
</body>
</html>
